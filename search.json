[{"path":"https://sdaume.github.io/srcquantcourse/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 Stefan Daume Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Example: Topic modelling Covid preprints","text":"example topic modelling analysis using Structural Topic Model (STM) (Roberts, Stewart, Tingley 2019) explore subset bioRxiv medRxiv preprints covering research related Covid-19. medRxiv website actually provides access dedicated collection preprints medRxix bioRxiv covering COVID-19 SARS-CoV-2. however work whole preprint collection create subset using keyword matching. Note analysis intended illustrate method topic modeling. complete analysis sample preprints detailed like feature larger number topics. document assumes familiarity Structural Topic Modeling (STM). Please consult stm package vignette (Roberts, Stewart, Tingley 2019) background.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"getting-the-document-data","dir":"Articles","previous_headings":"","what":"Getting the document data","title":"Example: Topic modelling Covid preprints","text":"bioRxiv medRxiv servers provide API access retrieve preprint meta-data. One option access API use medrxivr package. code snippet example collect bioRxiv preprint meta-data year 2015. package setup support exploring different thematic preprint subsets assumes usage preprints servers published 2013 2023. data can shared package usage API terms bioRxiv/medRxiv permit redistribution rehosting complete data; therefore package provides scripts collect clean data order replicate analysis (check /data-raw package repository). documented examples assume obtained data created local copy replication analyses. code allow . NOTE time writing returned dataset 365526 records. Retrieving data take several hours. replicating analysis like use bioRxiv/medRxiv API responsibly. Consider collecting smaller datasets (example shown example require preprints 2020 2023). Alternatively, use bulk snapshot detailed . addition 15 meta-data variables returned via API code adds server variable indicate origin preprint. important variable examples shown .","code":"library(medrxivr)  biorxiv_raw <- mx_api_content(server = \"biorxiv\",                               from_date = \"2015-12-01\",                               to_date = \"2015-12-31\") library(dplyr) library(medrxivr)  # get publications from medRxiv and bioRxiv pubs_biorxiv_raw <- medrxivr::mx_api_content(server = \"biorxiv\",                                              #from_date = \"2019-01-01\",                                              to_date = \"2023-12-31\")  pubs_medrxiv_raw <- medrxivr::mx_api_content(server = \"medrxiv\",                                              #from_date = \"2019-01-01\",                                              to_date = \"2023-12-31\")  pubs_biorxiv_raw <- pubs_biorxiv_raw %>%   mutate(server = \"biorxiv\")  pubs_medrxiv_raw <- pubs_medrxiv_raw %>%   mutate(server = \"medrxiv\")  preprints_raw <- dplyr::bind_rows(pubs_biorxiv_raw, pubs_medrxiv_raw)  save(preprints_raw, file = \"./data-raw/preprints_raw.Rdata\")"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"cleaning-filtering-and-annotating-the-data","dir":"Articles","previous_headings":"","what":"Cleaning, filtering and annotating the data","title":"Example: Topic modelling Covid preprints","text":"first step raw preprint data cleaned. Specifically, want retain one unique record per preprint, multiple versions unique doi may exist. retain latest version per DOI also ensure duplicate dois. crucial need unique identifier document want include topic modelling. Next annotate data additional variables, specifically want reduce publication date publication year, add additional variable is_published, inferred published variable. latter provides DOI journal preprint published peer review. also limit data preprints 2020 2023 (analysis Covid topics preprints prior 2020 relevant), retain variables may want explore document covariates, .e. document properties potentially influence prevalence topics. Finally, define keywords reduce preprint set preprints contain one keywords either title abstract, resulting subset 29692 publications.","code":"library(dplyr)  preprints_cleaned <- preprints_raw %>%   group_by(doi) %>%   filter(version == max(version)) %>%   ungroup() %>%   distinct(doi, .keep_all = TRUE) preprints <- preprints_cleaned %>%   mutate(published = stringr::str_trim(published)) %>%   mutate(published = na_if(published, \"NA\")) %>%   mutate(is_published = as.numeric(!is.na(published))) %>%   mutate(is_published = case_when(is_published == 1 ~ \"published\",                                   is_published == 0 ~ \"not published\",                                   TRUE ~ \"undefined\")) %>%   mutate(year = lubridate::year(date)) %>%   filter(year >= 2020 & year <= 2023) %>%    select(doi, server, title, abstract, date, year, version, is_published) library(stringr)  keywords <- c(\"sars-cov\", \"covid\")  search_pattern <- stringr::regex(paste(keywords, collapse = \"|\"),                                   ignore_case = TRUE)  covid_preprints <- preprints %>%   filter(stringr::str_detect(title, pattern = search_pattern) |            stringr::str_detect(abstract, pattern = search_pattern))"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"preparing-and-preprocessing-the-documents-for-text-analysis","dir":"Articles","previous_headings":"","what":"Preparing and preprocessing the documents for text analysis","title":"Example: Topic modelling Covid preprints","text":"order analyze preprints stm package need create representation documents document meta-data stm can utilize. stm offers built-methods support (see specifically textProcessor() prepDocuments() methods (Roberts, Stewart, Tingley 2019)). use instead quanteda package (Benoit et al. 2018) provides broad range methods text pre-processing analysis, creating formats also supported stm.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"create-a-corpus","dir":"Articles","previous_headings":"Preparing and preprocessing the documents for text analysis","what":"Create a corpus","title":"Example: Topic modelling Covid preprints","text":"First, create corpus object dataframe preprints. corpus essentially library documents used next steps. specifies variable used uniquely identify documents variable holds textual content (preprint abstracts) processed. Echoing corpus provide basic information. variables original dataframe interpreted included document metadata (‘docvars’), later included STM topic modelling process.","code":"library(quanteda)  pubs_corpus <- covid_preprints %>%   quanteda::corpus(docid_field = \"doi\", text_field = \"abstract\")  # pubs_corpus # Corpus consisting of 29,692 documents and 6 docvars."},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"tokenize-and-preprocess","dir":"Articles","previous_headings":"Preparing and preprocessing the documents for text analysis","what":"Tokenize and preprocess","title":"Example: Topic modelling Covid preprints","text":"analysis corpus documents tokenized, .e. processing texts broken semantic units relevant analysis. common approach interpret word (typically designated whitespaces punctuation) token. applied well. quanteda offers several alternative approaches. Instead individual words, sequences words (n-grams) example used. tokenization method also provides several options preprocessing filtering tokens. example, tokenizing, simultaneously remove punctuation, numbers, special symbols URLs. Furthermore, split words containing hyphens, word like social-ecological thus split two individual tokens (social ecological). text preprocessing choices strongly influence results text analysis thoroughly explained, carefully evaluated ideally based theory (see (Denny Spirling 2018)).","code":"pubs_tokens <- pubs_corpus %>%   quanteda::tokens(remove_punct = TRUE,                    remove_symbols = TRUE,                    remove_numbers = TRUE,                    remove_url = TRUE,                    remove_separators = TRUE,                    split_hyphens = TRUE)"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"create-a-document-feature-matrix","dir":"Articles","previous_headings":"Preparing and preprocessing the documents for text analysis","what":"Create a Document-feature matrix","title":"Example: Topic modelling Covid preprints","text":"tokens object used create document-feature matrix. statistical analysis reduces tokens matrix documents (rows) unique terms (columns) counts number occurrences term document. quanteda captures features supports general options terms (see quanteda documentation details).","code":"pubs_dfm <- pubs_tokens %>%   quanteda::dfm()"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"filter-terms-and-documents","dir":"Articles","previous_headings":"Preparing and preprocessing the documents for text analysis","what":"Filter terms and documents","title":"Example: Topic modelling Covid preprints","text":"followed (optional) processing filtering steps. common option example — reduce size data assist interpretation — removal -called stopwords (e.g. “”, “”, “” etc). step omitted reducing words (terms) word stem. stemming algorithm (several available) reduces words word stem. terms “universal”, “university” “universe” example reduced word stem “univers”; example indicates approach may require careful consideration. Stemming advantage potentially reduce size matrix substantially. options may considered reduce noise /size matrix. following code removes example terms (features) consist one character, terms appear least two different documents, furthermore remove documents contain least 5 tokens. example drops one document reduces number retained features half.","code":"pubs_dfm <- pubs_dfm %>%   quanteda::dfm_remove(pattern = quanteda::stopwords(\"english\")) #%>%   #quanteda::dfm_wordstem() # echo the result > pubs_dfm  Document-feature matrix of: 29,692 documents, 82,472 features (99.87% sparse) and 6 docvars.                 features docs             nitric oxide synthesised three isoforms synthases viz nnos neurons enos   10.1101/038398      6     6           1     1        1         1   1    1       2    1   10.1101/058511      0     0           0     0        0         0   0    0       0    0   10.1101/292979      0     0           0     2        0         0   0    0       0    0   10.1101/402370      0     0           0     0        0         0   0    0       0    0   10.1101/420737      0     0           0     0        0         0   0    0       0    0   10.1101/596700      0     0           0     0        0         0   0    0       0    0 [ reached max_ndoc ... 29,686 more documents, reached max_nfeat ... 82,462 more features ] pubs_dfm <- pubs_dfm %>%   quanteda::dfm_remove(min_nchar = 2) %>%   quanteda::dfm_trim(min_docfreq = 2, docfreq_type = \"count\") %>%   quanteda::dfm_subset(quanteda::ntoken(.) > 4) # echo the result > pubs_dfm  Document-feature matrix of: 29,691 documents, 37,093 features (99.72% sparse) and 6 docvars.                 features docs             nitric oxide synthesised three isoforms synthases viz neurons enos endothelial   10.1101/038398      6     6           1     1        1         1   1       2    1           2   10.1101/058511      0     0           0     0        0         0   0       0    0           0   10.1101/292979      0     0           0     2        0         0   0       0    0           0   10.1101/402370      0     0           0     0        0         0   0       0    0           0   10.1101/420737      0     0           0     0        0         0   0       0    0           0   10.1101/596700      0     0           0     0        0         0   0       0    0           0 [ reached max_ndoc ... 29,685 more documents, reached max_nfeat ... 37,083 more features ]"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"fitting-the-stm-topic-model","dir":"Articles","previous_headings":"Topic modeling","what":"Fitting the STM topic model","title":"Example: Topic modelling Covid preprints","text":"key input topic modelling algorithm number topics (K) model fit , set 20 (see separate document discussion suitable choices number topics). fitting topic model convert document-feature matrix native STM format. order fit topic model stm() function need set documents, vocabulary documents composed dataframe specifying values document meta-data variables (data) can used process “covariates” might influence prevalence topics document. example , ask stm incorporate origin document (server) publication year fitting topic model. argument prevalence = ~ server * s(year) expresses assume prevalence topics document influenced two variables, also interact, .e. work hypothesis different temporal trends expected documents published either two preprint servers1. consideration covariates optional. omitted model reduces Correlated Topic Model (Blei Lafferty 2007; Roberts, Stewart, Tingley 2019). also supply seed, allows replicate results topic modeling.","code":"library(stm)  covid_stm_docs <- quanteda::convert(pubs_dfm, to = \"stm\")  covid_model_K20 <- stm(documents = covid_stm_docs$documents,                        vocab = covid_stm_docs$vocab,                        data = covid_stm_docs$meta,                        prevalence = ~ server * s(year),                        K = 20,                        verbose = TRUE,                        seed = 9868467)"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"estimating-the-effect-of-document-covariates","dir":"Articles","previous_headings":"Topic modeling","what":"Estimating the effect of document covariates","title":"Example: Topic modelling Covid preprints","text":"model converged can estimate effect document covariates topic prevalence. estimateEffect() function allows run regressions based formula specified first argument. identical formula used fitting topic model, regressions run 20 topics. metadata used previously needs supplied function addition topic model object. concludes fitting model. following sections step sample exploration topic model.","code":"covid_effect_K20 <- estimateEffect(1:20 ~ server * s(year),                                    stmobj = covid_model_K20,                                    metadata = covid_stm_docs$meta)"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"basic-topic-model-information","dir":"Articles","previous_headings":"Analysing and interpreting the topic model","what":"Basic topic model information","title":"Example: Topic modelling Covid preprints","text":"topic model defined two matrices capture probability distributions topics documents (gamma matrix) words (terms) topics (beta matrix). can start exploring built-functions stm. plot() function plots chart showing topic proportions topics model. topic identified unique ID (1-20) plot five words (terms) highest probability associated given topic. gives early indication distinct latent topics analysed subset preprints.  summary() function provides detailed view topics can help begin interpreting labeling 20 topics. Specifically, output shows four different sets words associated topic. ‘Highest Prob’ lists words highest probability associated topic. comparison different topics highlights term covid high probability several topics. list ‘FREX’ words summarizes words frequent exclusive topic, .e. characterize topic comparison topics (consult stm::labelTopics() details well Lift Score word sets).","code":"plot(covid_model_K20, n = 5) summary(covid_model_K20) ># A topic model with 20 topics, 29691 documents and a 37093 word dictionary. ># Topic 1 Top Words: >#       Highest Prob: model, can, covid, transmission, epidemic, data, disease  >#       FREX: npis, mathematical, compartmental, scenarios, seir, reproduction, sir  >#       Lift: 1we, abms, ao_scplowbstractc_scplowas, apt, artefact, asilv, asymptotically  >#       Score: distancing, social, epidemic, reproduction, npis, model, r0  ># Topic 2 Top Words: >#       Highest Prob: cov, sars, drug, antiviral, activity, drugs, covid  >#       FREX: src, figdir, o_linksmallfig, c_fig, m_fig, o_fig, gif  >#       Lift: k777, gif, pmmov, wwtps, 13k, 17k, 18k  >#       Score: mpro, antiviral, drug, inhibitors, protease, drugs, compounds  ># Topic 3 Top Words: >#       Highest Prob: covid, risk, age, mortality, ci, associated, years  >#       FREX: hispanic, ethnicity, pregnant, racial, black, smoking, preterm  >#       Lift: 65s, asmr, assault, backgroundethnic, backgroundracial, backgroundsocio, brunt  >#       Score: ci, age, women, mortality, ethnicity, aor, hispanic  ># Topic 4 Top Words: >#       Highest Prob: covid, health, pandemic, mental, social, study, survey  >#       FREX: loneliness, emotional, attitude, depression, insecurity, mental, anxiety  >#       Lift: insecurity, accelerometers, amhara, angry, anovas, asd, asleep  >#       Score: mental, anxiety, depression, respondents, social, psychological, students  ># Topic 5 Top Words: >#       Highest Prob: sars, cov, infection, testing, transmission, cases, children  >#       FREX: ifr, seroprevalence, schools, school, contacts, household, attack  >#       Lift: inmates, 19y, 35y, 39y, 9a, abidjan, addscovid  >#       Score: school, seroprevalence, children, schools, household, transmission, testing  ># Topic 6 Top Words: >#       Highest Prob: cov, sars, virus, viral, coronavirus, respiratory, infection  >#       FREX: bats, cats, deer, animals, covs, wildlife, hcov  >#       Lift: cats, 5x106, aav6, aegyptiacus, aethiops, affinis, agm  >#       Score: cov, sars, mice, rna, viruses, coronaviruses, animals  ># Topic 7 Top Words: >#       Highest Prob: patients, covid, hospital, disease, clinical, severe, admission  >#       FREX: acei, admission, arbs, admitted, icu, aki, aceis  >#       Lift: 1.1x109, 2020r1g1a1a01006229, 2l, 4.0x109, 40y, ahmad, ahrq  >#       Score: patients, admission, icu, hospital, admitted, ci, hospitalized  ># Topic 8 Top Words: >#       Highest Prob: covid, cases, countries, number, deaths, data, pandemic  >#       FREX: cfr, italy, cities, country, countries, fatality, china  >#       Lift: 1000m, 1th, 55th, abysmally, abyss, adhanom, adminstat  >#       Score: countries, cases, lockdown, deaths, country, cfr, daily  ># Topic 9 Top Words: >#       Highest Prob: protein, binding, spike, sars, cov, ace2, rbd  >#       FREX: conformational, cryo, conformation, glycans, conformations, nanobodies, residues  >#       Lift: 13c, 6lzg, 6m0j, 6vw1, 6vxx, aabpu, abdab  >#       Score: binding, rbd, protein, spike, ace2, proteins, epitopes  ># Topic 10 Top Words: >#       Highest Prob: data, can, learning, covid, using, model, based  >#       FREX: aerosol, n95, aerosols, respirators, decontamination, airborne, machine  >#       Lift: elastomeric, forehead, papr, radiomics, exhaled, singing, 0.3m  >#       Score: learning, masks, aerosol, machine, respirators, n95, mask  ># Topic 11 Top Words: >#       Highest Prob: vaccine, vaccination, covid, middle, vaccines, dot, dose  >#       FREX: hesitancy, dot, vaccinate, middle, hesitant, rollout, ve  >#       Lift: #949850, acceptant, adjrr, aesis, amparo, analysesthe, andersen  >#       Score: vaccination, vaccine, dot, booster, dose, vaccinated, middle  ># Topic 12 Top Words: >#       Highest Prob: studies, care, covid, health, research, data, pandemic  >#       FREX: reviews, telemedicine, preprints, scoping, articles, blacksquare, publications  >#       Lift: preprints, 1.2m, aas, abbreviating, accustomed, activists, advisor  >#       Score: review, care, services, articles, reviews, pubmed, service  ># Topic 13 Top Words: >#       Highest Prob: sars, cov, genome, mutations, sequencing, viral, variants  >#       FREX: phylogenetic, gisaid, clades, wgs, genomes, genomic, haplotype  >#       Lift: clades, snvs, 1.1.7s, 11083g, 14408c, 17del, 20a  >#       Score: mutations, genome, wastewater, genomes, sequences, sequencing, genomic  ># Topic 14 Top Words: >#       Highest Prob: cells, cell, sars, cov, expression, infection, ace2  >#       FREX: autophagy, mirnas, mirna, at2, ifns, ciliated, scrna  >#       Lift: 25hc, angiotensinogen, antagonizes, apcs, arf6, asgr1, at2s  >#       Score: cells, expression, ace2, cell, genes, epithelial, tmprss2  ># Topic 15 Top Words: >#       Highest Prob: antibody, sars, cov, antibodies, igg, responses, vaccine  >#       FREX: iga, bau, igg, humoral, immunogenicity, as03, reactogenicity  >#       Lift: 1x1011, 28d, 30ug, ad26cov2, addas03, adhu5, atellica  >#       Score: igg, antibody, antibodies, neutralizing, rbd, vaccine, spike  ># Topic 16 Top Words: >#       Highest Prob: sars, cov, pcr, samples, rt, test, testing  >#       FREX: ag, rdt, rdts, lod, rt, panbio, kits  >#       Lift: poct, cobas, panbio, #yomecorono, 1.6x104, 10min, 15min  >#       Score: rt, pcr, assay, samples, saliva, detection, assays  ># Topic 17 Top Words: >#       Highest Prob: variants, omicron, variant, delta, ba, cov, sars  >#       FREX: omicron, ba, xbb, subvariants, delta, bq, voc  >#       Lift: 1.5s, 129s2, 1f11, 2.86s, 3b8, 417n, 75d30121c11061  >#       Score: omicron, ba, variants, variant, delta, mutations, voc  ># Topic 18 Top Words: >#       Highest Prob: covid, patients, disease, severe, immune, inflammatory, associated  >#       FREX: autoantibodies, ipf, balf, neutrophils, il, fibrosis, autoantibody  >#       Lift: 18f, 24hr, a2ar, aab, actinobacteria, activin, adiponectin  >#       Score: inflammatory, il, patients, cytokine, inflammation, cytokines, endothelial  ># Topic 19 Top Words: >#       Highest Prob: patients, treatment, covid, group, days, day, trial  >#       FREX: placebo, randomized, hcq, soc, azithromycin, arm, tocilizumab  >#       Lift: 200mg, 400mg, 500mg, 600mg, 800mg, aureobasidium, ayush  >#       Score: placebo, hcq, trial, patients, randomized, tocilizumab, hydroxychloroquine  ># Topic 20 Top Words: >#       Highest Prob: covid, symptoms, long, workers, infection, participants, study  >#       FREX: hcws, taste, smell, hcw, fatigue, workers, headache  >#       Lift: chemesthetic, dirty, eyewear, firefighters, ohs, principality, psychophysical  >#       Score: symptoms, hcws, workers, participants, symptom, hcw, fatigue"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"topic-document-and-term-topic-distributions","dir":"Articles","previous_headings":"Analysing and interpreting the topic model","what":"Topic-document and term-topic distributions","title":"Example: Topic modelling Covid preprints","text":"mentioned, topic model defined gamma (distribution topics words) beta (distribution terms topics) matrices. help tidytext package can extract dataframes detailed analysis. row following dataframe lists probability (gamma) given topic occurring given document2. Similarly, beta matrix (extracted dataframe) lists row probability (beta) given term occurring given topic. Starting beta matrix can create word clouds explore useful semantic labels topic.","code":"># Rows: 593,820 ># Columns: 3 ># $ document  [3m [38;5;246m<int> [39m [23m 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18… ># $ topic     [3m [38;5;246m<int> [39m [23m 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… ># $ gamma     [3m [38;5;246m<dbl> [39m [23m 0.001283143, 0.003547179, 0.003745510, 0.005495076, 0.0630417… ># Rows: 741,860 ># Columns: 3 ># $ topic  [3m [38;5;246m<int> [39m [23m 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 1… ># $ term   [3m [38;5;246m<chr> [39m [23m \"#1\", \"#1\", \"#1\", \"#1\", \"#1\", \"#1\", \"#1\", \"#1\", \"#1\", \"#1\", \"#1\"… ># $ beta   [3m [38;5;246m<dbl> [39m [23m 1.874650e-112, 2.519509e-119, 1.248970e-118, 6.665355e-160, 3.21…"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"understanding-and-labeling-topics","dir":"Articles","previous_headings":"Analysing and interpreting the topic model","what":"Understanding and labeling topics","title":"Example: Topic modelling Covid preprints","text":"mentioned previously stm can use word probabilities also compute FREX (frequent exclusive) words per topic. can retrieved stm::labelTopics() function, returns ordered lists different word sets characterizing topic. can combine information high probability FREX words create word clouds topic, might help assign summary label topic. Word clouds showing 50 probable terms per topic. Words scaled normalized probability per topic, terms also among top 20 FREX terms highlighted orange. readability, terms ‘sars’, ‘cov’ ‘covid’ removed occur high probability topics. review combination FREX high probability terms distinct topics emerging, : “epidemic models” (Topic 1), “vaccines” (Topic 11), “testing” (Topic 16), “virus variants” (Topic 17), “treatments” (Topic 2), “mortality risks” (Topic 3), “mental health” (Topic 4), “country-wise case reports” (Topic 8), “virus molecular structure” (Topic 9). Deriving semantic labels also benefit review sample documents representative certain topics, .e. topic model assigns high topic proportion given topic document. Furthermore, consistency assigned semantic labels checked prior analysis (see example oolong package systematic approach).","code":"library(tidyr) library(tibble)  # get the top FREX words frex_top20 <- as.data.frame(labelTopics(covid_model_K20, n = 20)$frex) %>%   rownames_to_column(var = \"topic\") %>%   pivot_longer(starts_with(\"V\"), values_to = \"term\") %>%   mutate(is_frex = 1) %>%   select(-name)  topic_words <- tidytext::tidy(covid_model_K20, matrix = \"beta\") %>%   #filter(!(term %in% c(\"sars\", \"cov\", \"covid\"))) %>%    mutate(topic = as.character(topic)) %>%   group_by(topic) %>%   arrange(-beta) %>%   slice_head(n = 50) %>%   mutate(beta_norm = (beta - min(beta)) / (max(beta) - min(beta))) %>%   ungroup() %>%   left_join(frex_top20, by = c(\"topic\", \"term\")) %>%   mutate(is_frex = ifelse(is.na(is_frex), \"0\", \"1\")) %>%   filter(!(term %in% c(\"sars\", \"cov\", \"covid\"))) %>%   mutate(topic = paste(\"Topic\", topic))  ggplot(topic_words, aes(label = term, size = beta_norm, color = is_frex)) +   ggwordcloud::geom_text_wordcloud_area(shape = \"square\",                                         family = \"Arial\",                                         rm_outside = TRUE) +   scale_radius(range = c(4, 15)) +   scale_color_manual(values = c(\"0\" = \"black\", \"1\" = \"#D55E00\")) +    facet_wrap(~topic, ncol = 4)"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"covariate-effects","dir":"Articles","previous_headings":"Analysing and interpreting the topic model","what":"Covariate effects","title":"Example: Topic modelling Covid preprints","text":"key feature STM incorporation document covariates topic model. example considered publication year preprint server covariates might influence prevalence topic document. also applied regression covariates fit model, extracted stm::estimateEffect(). first exploration can print regression tables selected topics. following sections illustrate exploration covariate effects several examples.","code":"summary(covid_effect_K20) >#  ># Call: ># estimateEffect(formula = 1:20 ~ server * s(year), stmobj = covid_model_K20,  >#     metadata = covid_stm_docs$meta) >#  >#  ># Topic 1: >#  ># Coefficients: >#                          Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.0234726  0.0036509   6.429 1.30e-10 *** ># servermedrxiv           0.1239494  0.0043010  28.819  < 2e-16 *** ># s(year)1               -0.0019453  0.0147316  -0.132    0.895     ># s(year)2               -0.0007112  0.0154060  -0.046    0.963     ># s(year)3                0.0083986  0.0066258   1.268    0.205     ># servermedrxiv:s(year)1 -0.0694801  0.0172830  -4.020 5.83e-05 *** ># servermedrxiv:s(year)2 -0.0967323  0.0188750  -5.125 3.00e-07 *** ># servermedrxiv:s(year)3 -0.0706137  0.0083719  -8.435  < 2e-16 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 2: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.098622   0.002870  34.359  < 2e-16 *** ># servermedrxiv          -0.085876   0.003158 -27.194  < 2e-16 *** ># s(year)1               -0.020009   0.011308  -1.770   0.0768 .   ># s(year)2               -0.011122   0.013413  -0.829   0.4070     ># s(year)3               -0.028625   0.004559  -6.279 3.46e-10 *** ># servermedrxiv:s(year)1  0.021675   0.012535   1.729   0.0838 .   ># servermedrxiv:s(year)2  0.007998   0.014421   0.555   0.5792     ># servermedrxiv:s(year)3  0.030380   0.005294   5.739 9.64e-09 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 3: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.011080   0.002838   3.904 9.49e-05 *** ># servermedrxiv           0.053924   0.003313  16.277  < 2e-16 *** ># s(year)1               -0.002594   0.011379  -0.228    0.820     ># s(year)2               -0.001931   0.011837  -0.163    0.870     ># s(year)3                0.001236   0.004822   0.256    0.798     ># servermedrxiv:s(year)1  0.014968   0.013790   1.085    0.278     ># servermedrxiv:s(year)2  0.014308   0.014997   0.954    0.340     ># servermedrxiv:s(year)3  0.029822   0.006464   4.613 3.98e-06 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 4: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.008840   0.003291   2.686  0.00724 **  ># servermedrxiv           0.057762   0.003891  14.845  < 2e-16 *** ># s(year)1                0.004668   0.013396   0.348  0.72751     ># s(year)2               -0.005065   0.013994  -0.362  0.71738     ># s(year)3                0.004569   0.005897   0.775  0.43848     ># servermedrxiv:s(year)1  0.020397   0.016516   1.235  0.21685     ># servermedrxiv:s(year)2 -0.004171   0.018083  -0.231  0.81758     ># servermedrxiv:s(year)3  0.020229   0.007772   2.603  0.00925 **  ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 5: >#  ># Coefficients: >#                          Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.0049380  0.0023158   2.132   0.0330 *   ># servermedrxiv           0.0542651  0.0027605  19.657   <2e-16 *** ># s(year)1               -0.0007676  0.0093587  -0.082   0.9346     ># s(year)2                0.0001329  0.0099343   0.013   0.9893     ># s(year)3                0.0011430  0.0041224   0.277   0.7816     ># servermedrxiv:s(year)1  0.0260479  0.0114818   2.269   0.0233 *   ># servermedrxiv:s(year)2 -0.0018075  0.0121310  -0.149   0.8816     ># servermedrxiv:s(year)3 -0.0085676  0.0053550  -1.600   0.1096     ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 6: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.148623   0.003853  38.569  < 2e-16 *** ># servermedrxiv          -0.115800   0.004198 -27.582  < 2e-16 *** ># s(year)1               -0.021066   0.013448  -1.567   0.1172     ># s(year)2               -0.049178   0.012246  -4.016 5.93e-05 *** ># s(year)3               -0.043821   0.006088  -7.198 6.24e-13 *** ># servermedrxiv:s(year)1  0.005900   0.014970   0.394   0.6935     ># servermedrxiv:s(year)2  0.035335   0.013995   2.525   0.0116 *   ># servermedrxiv:s(year)3  0.031123   0.006931   4.490 7.14e-06 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 7: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.010716   0.002946   3.637 0.000276 *** ># servermedrxiv           0.086038   0.003510  24.515  < 2e-16 *** ># s(year)1               -0.004186   0.011584  -0.361 0.717800     ># s(year)2               -0.007804   0.012172  -0.641 0.521433     ># s(year)3               -0.003445   0.005113  -0.674 0.500371     ># servermedrxiv:s(year)1 -0.049309   0.014543  -3.390 0.000699 *** ># servermedrxiv:s(year)2 -0.019582   0.015749  -1.243 0.213758     ># servermedrxiv:s(year)3 -0.038308   0.006498  -5.896 3.77e-09 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 8: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.027270   0.003049   8.943  < 2e-16 *** ># servermedrxiv           0.108700   0.003571  30.442  < 2e-16 *** ># s(year)1               -0.012951   0.012457  -1.040  0.29852     ># s(year)2               -0.018430   0.012461  -1.479  0.13915     ># s(year)3               -0.017082   0.005233  -3.264  0.00110 **  ># servermedrxiv:s(year)1 -0.088406   0.014913  -5.928  3.1e-09 *** ># servermedrxiv:s(year)2 -0.046521   0.015453  -3.010  0.00261 **  ># servermedrxiv:s(year)3 -0.060188   0.006507  -9.249  < 2e-16 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 9: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.170562   0.004600  37.078  < 2e-16 *** ># servermedrxiv          -0.164030   0.004791 -34.236  < 2e-16 *** ># s(year)1                0.017962   0.019094   0.941   0.3469     ># s(year)2               -0.034896   0.020110  -1.735   0.0827 .   ># s(year)3               -0.028047   0.006608  -4.244 2.20e-05 *** ># servermedrxiv:s(year)1 -0.010861   0.020286  -0.535   0.5924     ># servermedrxiv:s(year)2  0.033279   0.021919   1.518   0.1290     ># servermedrxiv:s(year)3  0.027960   0.007152   3.909 9.28e-05 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 10: >#  ># Coefficients: >#                          Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.0447474  0.0033934  13.187  < 2e-16 *** ># servermedrxiv           0.0117677  0.0036746   3.202  0.00136 **  ># s(year)1                0.0042512  0.0146738   0.290  0.77204     ># s(year)2                0.0002146  0.0131704   0.016  0.98700     ># s(year)3                0.0261908  0.0059161   4.427 9.59e-06 *** ># servermedrxiv:s(year)1 -0.0177346  0.0162884  -1.089  0.27625     ># servermedrxiv:s(year)2 -0.0304860  0.0153538  -1.986  0.04709 *   ># servermedrxiv:s(year)3 -0.0409663  0.0071153  -5.758 8.62e-09 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 11: >#  ># Coefficients: >#                        Estimate Std. Error t value Pr(>|t|)     ># (Intercept)            0.005019   0.002316   2.167  0.03022 *   ># servermedrxiv          0.008235   0.002668   3.087  0.00203 **  ># s(year)1               0.010198   0.009840   1.036  0.30003     ># s(year)2               0.009975   0.010133   0.984  0.32493     ># s(year)3               0.006459   0.004239   1.524  0.12757     ># servermedrxiv:s(year)1 0.056928   0.011556   4.926 8.42e-07 *** ># servermedrxiv:s(year)2 0.073736   0.012395   5.949 2.73e-09 *** ># servermedrxiv:s(year)3 0.047021   0.005929   7.930 2.26e-15 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 12: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.022032   0.002810   7.842  4.6e-15 *** ># servermedrxiv           0.041899   0.003378  12.404  < 2e-16 *** ># s(year)1               -0.008686   0.011265  -0.771    0.441     ># s(year)2               -0.005816   0.012226  -0.476    0.634     ># s(year)3               -0.002594   0.004839  -0.536    0.592     ># servermedrxiv:s(year)1 -0.006622   0.013995  -0.473    0.636     ># servermedrxiv:s(year)2  0.009622   0.015905   0.605    0.545     ># servermedrxiv:s(year)3  0.034791   0.006458   5.388  7.2e-08 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 13: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.104369   0.003119  33.465  < 2e-16 *** ># servermedrxiv          -0.086353   0.003406 -25.353  < 2e-16 *** ># s(year)1               -0.031494   0.015454  -2.038   0.0416 *   ># s(year)2               -0.027991   0.015157  -1.847   0.0648 .   ># s(year)3               -0.023238   0.005574  -4.169 3.07e-05 *** ># servermedrxiv:s(year)1  0.077632   0.017856   4.348 1.38e-05 *** ># servermedrxiv:s(year)2  0.028355   0.016892   1.679   0.0932 .   ># servermedrxiv:s(year)3  0.041025   0.006609   6.208 5.44e-10 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 14: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.124617   0.003393  36.730   <2e-16 *** ># servermedrxiv          -0.112738   0.003565 -31.619   <2e-16 *** ># s(year)1                0.004064   0.014954   0.272    0.786     ># s(year)2               -0.007471   0.015650  -0.477    0.633     ># s(year)3                0.007542   0.006356   1.187    0.235     ># servermedrxiv:s(year)1 -0.002981   0.015878  -0.188    0.851     ># servermedrxiv:s(year)2  0.005276   0.016776   0.315    0.753     ># servermedrxiv:s(year)3 -0.005115   0.007104  -0.720    0.472     ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 15: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.053506   0.003511  15.241  < 2e-16 *** ># servermedrxiv          -0.027419   0.003957  -6.930  4.3e-12 *** ># s(year)1                0.044577   0.014778   3.017  0.00256 **  ># s(year)2                0.024793   0.015483   1.601  0.10931     ># s(year)3                0.017735   0.006534   2.714  0.00664 **  ># servermedrxiv:s(year)1  0.003678   0.017256   0.213  0.83122     ># servermedrxiv:s(year)2  0.033713   0.017700   1.905  0.05683 .   ># servermedrxiv:s(year)3 -0.003428   0.007633  -0.449  0.65337     ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 16: >#  ># Coefficients: >#                          Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.0531739  0.0034605  15.366  < 2e-16 *** ># servermedrxiv           0.0176192  0.0040197   4.383 1.17e-05 *** ># s(year)1               -0.0494280  0.0130163  -3.797 0.000147 *** ># s(year)2               -0.0295933  0.0131275  -2.254 0.024185 *   ># s(year)3               -0.0278840  0.0057618  -4.839 1.31e-06 *** ># servermedrxiv:s(year)1  0.0607415  0.0151090   4.020 5.83e-05 *** ># servermedrxiv:s(year)2  0.0014032  0.0160728   0.087 0.930434     ># servermedrxiv:s(year)3 -0.0007724  0.0072094  -0.107 0.914678     ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 17: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.012534   0.002411   5.199 2.02e-07 *** ># servermedrxiv          -0.010875   0.002692  -4.040 5.35e-05 *** ># s(year)1                0.062405   0.012066   5.172 2.33e-07 *** ># s(year)2                0.167387   0.016126  10.380  < 2e-16 *** ># s(year)3                0.074749   0.005301  14.101  < 2e-16 *** ># servermedrxiv:s(year)1 -0.043541   0.013441  -3.239   0.0012 **  ># servermedrxiv:s(year)2 -0.080279   0.018025  -4.454 8.46e-06 *** ># servermedrxiv:s(year)3 -0.037892   0.006106  -6.206 5.51e-10 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 18: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.055676   0.003010  18.499  < 2e-16 *** ># servermedrxiv          -0.019889   0.003444  -5.775 7.77e-09 *** ># s(year)1                0.005577   0.012082   0.462  0.64439     ># s(year)2                0.004124   0.012808   0.322  0.74745     ># s(year)3                0.029385   0.005767   5.095 3.51e-07 *** ># servermedrxiv:s(year)1 -0.004508   0.014704  -0.307  0.75914     ># servermedrxiv:s(year)2 -0.004647   0.015435  -0.301  0.76336     ># servermedrxiv:s(year)3 -0.020660   0.006908  -2.991  0.00279 **  ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 19: >#  ># Coefficients: >#                         Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.013591   0.002601   5.226 1.74e-07 *** ># servermedrxiv           0.027321   0.003047   8.966  < 2e-16 *** ># s(year)1                0.000435   0.009962   0.044   0.9652     ># s(year)2               -0.006410   0.010551  -0.608   0.5435     ># s(year)3               -0.003120   0.004452  -0.701   0.4833     ># servermedrxiv:s(year)1 -0.003112   0.012278  -0.253   0.7999     ># servermedrxiv:s(year)2  0.028406   0.013163   2.158   0.0309 *   ># servermedrxiv:s(year)3  0.002735   0.005849   0.468   0.6400     ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 20: >#  ># Coefficients: >#                          Estimate Std. Error t value Pr(>|t|)     ># (Intercept)             0.0067411  0.0019450   3.466 0.000529 *** ># servermedrxiv           0.0314177  0.0022154  14.181  < 2e-16 *** ># s(year)1               -0.0015050  0.0076026  -0.198 0.843081     ># s(year)2               -0.0001033  0.0081694  -0.013 0.989913     ># s(year)3                0.0004660  0.0034449   0.135 0.892386     ># servermedrxiv:s(year)1  0.0086954  0.0095846   0.907 0.364294     ># servermedrxiv:s(year)2  0.0129473  0.0106023   1.221 0.222029     ># servermedrxiv:s(year)3  0.0213223  0.0045896   4.646  3.4e-06 *** ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"publication-year","dir":"Articles","previous_headings":"Analysing and interpreting the topic model > Covariate effects","what":"Publication year","title":"Example: Topic modelling Covid preprints","text":"stm offers several built-methods explore covariate effects visually. visualization effect preprint publication year expected topic proportions confirm trends appear match intuitively different phases Covid-19 pandemic. Modelling spread infections (Topic 1) high relevance initially, declined later, applies (PCR-)testing (Topic 16), vaccines (Topic 11) received limited coverage earlier preprints, became important later years developed distributed.  Alternatively, stminsights package used extract regression information stm effects object create customized charts.","code":"plot(covid_effect_K20,      covariate = \"year\",      method = \"continuous\",      model = covid_model_K20,      topics = c(1, 16, 11),      xaxt = \"n\",      main = 'Effect of publication year on prevalence of Topic 1 (\"epidemic \\nmodels\"), Topic 16 (\"testing\") and Topic 11 (\"vaccines\")',      labeltype = \"prob\",      xlab = \"Publication year\") axis(1, at = c(\"2020\",\"2021\",\"2022\",\"2023\"), labels = c(2020, 2021, 2022, 2023)) library(stminsights)  year_effect <- get_effects(estimates = covid_effect_K20,                             variable = \"year\",                            type = \"continuous\")  year_effect %>%   mutate(topic = as.character(topic)) %>%   mutate(topic = paste(\"Topic\", topic)) %>%     ggplot(aes(x = value, y = proportion)) +       geom_line() +       geom_ribbon(aes(ymin = lower, ymax = upper),                    alpha = 0.2, linetype = 0)  +       xlab(\"Publication year\") +       ylab(\"Topic prevalence\") +       facet_wrap(~topic, ncol = 4) +       theme_minimal()"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"preprint-server","dir":"Articles","previous_headings":"Analysing and interpreting the topic model > Covariate effects","what":"Preprint server","title":"Example: Topic modelling Covid preprints","text":"model also incorporated preprint server (bioRxiv medRxiv) covariate. hypothesized prevalence certain topics influenced covariate, .e. likely see certain topics either bioRxiv medRxiv. STM interprets treatment (see (Roberts et al. 2014) background examples) can extract effect treatment regression object returned estimateEffect(). stm::plot() offers different methods explore effects. figure lists effect ‘treatment medrxiv’ topics model. treatment can positive negative effect. can example see Topic 4 (“mental health”) can expected higher prevalence medRxiv preprints, whereas Topic 9 (“virus molecular structure”) much lower prevalence medRxiv preprints, .e. expected higher prevalence bioRxiv preprints.  can also compare topical prevalence effect covariate values single topic. figure confirms previous observation Topic 9 (“virus molecular structure”) prevalence close zero medRxiv preprints prevalence approximately 0.17 bioRxiv preprints, .e. seems appear almost exclusively latter.","code":"plot(covid_effect_K20,       covariate = \"server\",      #topics = c(9, 10, 16, 1),      model = covid_model_K20,       method = \"difference\",      cov.value1 = \"medrxiv\", cov.value2 = \"biorxiv\",      xlab = \"higher biorxiv prevalence ... higher medrxiv prevalence\",      xlim = c(-0.19, 0.1),      #labeltype = \"prob\",      main = \"Effect of preprint server ('treatment medrxiv')\") plot(covid_effect_K20,       covariate = \"server\",      topics = c(9),      model = covid_model_K20,        method = \"pointestimate\",      xlab = \"Topical prevalence\",      xlim = c(-0.04, 0.2),      #labeltype = \"prob\",      main = \"Effect of preprint server covariate for Topic 9\")"},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"combination-of-preprint-server-and-publication-year","dir":"Articles","previous_headings":"Analysing and interpreting the topic model > Covariate effects","what":"Combination of preprint server and publication year","title":"Example: Topic modelling Covid preprints","text":"Finally, can also explore combined effect covariates; assumed interacting effect two covariates server year. plot visualizes Topic 17 (“virus variants”) illustrates topical prevalence increased throughout pandemic preprints topic apparently received coverage bioRxiv preprints.  , stminsights can used retrieve information create customized visualizations combined covariate effect.","code":"biorxiv_effect <- get_effects(covid_effect_K20,                               variable = \"year\", type = \"continuous\",                                moderator = \"server\", modval = \"biorxiv\")  medrxiv_effect <- get_effects(covid_effect_K20,                               variable = \"year\", type = \"continuous\",                                moderator = \"server\", modval = \"medrxiv\")  server_effects <- bind_rows(biorxiv_effect, medrxiv_effect)  server_effects %>%   mutate(topic = as.character(topic)) %>%   mutate(topic = paste(\"Topic\", topic)) %>%     ggplot(aes(x = value, y = proportion, color = moderator,                group = moderator, fill = moderator)) +       geom_line() +       geom_ribbon(aes(ymin = lower, ymax = upper,                        fill = moderator), alpha = 0.2, linetype = 0) +       xlab(\"Publication year\") +       ylab(\"Topic prevalence\") +       facet_wrap(~topic, ncol = 4) +       theme_minimal() +       theme(legend.position = \"bottom\")"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/covid-preprint-topics.html","id":"topic-correlations","dir":"Articles","previous_headings":"Analysing and interpreting the topic model > Exploring the topic structure","what":"Topic correlations","title":"Example: Topic modelling Covid preprints","text":"Finally, considering STM extending (Roberts, Stewart, Tingley 2019) correlated topic model (Blei Lafferty 2007) may also explore topics frequently cooccuring. topic correlation matrix retrieved stm::topicCorr() can plotted. resulting figure indicates least two clusters topics.  correlation matrix can used analysis (e.g. networks clusters) alternative visualizations. outside scope example course module. illustration, following figure creates alternative network visualization, nodes colored according community analysis topical network, reveals four distinct topical clusters.","code":"covid_topic_correlations <- topicCorr(covid_model_K20)  plot(covid_topic_correlations)"},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"getting-the-document-data","dir":"Articles","previous_headings":"Exercise tasks","what":"Getting the document data","title":"Exercise 1: Topic modeling biodiversity preprints","text":"assume created local copy preprint data run analysis (see information code samples “Getting document data” vignette(\"covid-preprint-topics\")).","code":"load(url(\"PREPRINT_RDATA_LOCATION_HERE\"))"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"cleaning-filtering-and-annotating-the-data","dir":"Articles","previous_headings":"Exercise tasks","what":"Cleaning, filtering and annotating the data","title":"Exercise 1: Topic modeling biodiversity preprints","text":"example planning explore whether publication status influences topic prevalence. therefore adapt time range consider preprints added 2017 2021. reduce subset preprints reference term ‘biodiversity’ either preprint title abstract.","code":"# adapt based on the covid preprints example"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"create-a-corpus","dir":"Articles","previous_headings":"Exercise tasks > Preparing and preprocessing the documents for text analysis","what":"Create a corpus","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Create corpus explore properties.","code":"# quanteda is used for corpus creation"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"tokenize-and-preprocess","dir":"Articles","previous_headings":"Exercise tasks > Preparing and preprocessing the documents for text analysis","what":"Tokenize and preprocess","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Tokenize applying steps Covid preprint example.","code":"# quanteda is used for tokenization"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"create-a-document-feature-matrix","dir":"Articles","previous_headings":"Exercise tasks > Preparing and preprocessing the documents for text analysis","what":"Create a Document-feature matrix","title":"Exercise 1: Topic modeling biodiversity preprints","text":"","code":"# quanteda is used for creation of a DFM"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"filter-terms-and-documents","dir":"Articles","previous_headings":"Exercise tasks > Preparing and preprocessing the documents for text analysis","what":"Filter terms and documents","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Remove stopwords document-feature-matrix. Explore properties. Filter tokens documents applying approach Covid preprint example.","code":"# quanteda is used for stopword removal # quanteda is used for filtering"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"fitting-the-stm-topic-model","dir":"Articles","previous_headings":"Exercise tasks > Topic modeling","what":"Fitting the STM topic model","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Fit stm topic model 10 topics prepared data. model consider interacting effect covariates is_published publication year topical prevalence. Apply seed argument value 9868467.","code":"# convert the DFM into stm format and run the stm() function"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"estimating-the-effect-of-document-covariates","dir":"Articles","previous_headings":"Exercise tasks > Topic modeling","what":"Estimating the effect of document covariates","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Evaluate effect previously chosen topic prevalence covariates topics. concludes fitting model. following sections step sample exploration topic model.","code":"# estimateEffect() on the topic model"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"basic-topic-model-information","dir":"Articles","previous_headings":"Exercise tasks > Analysing and interpreting the topic model","what":"Basic topic model information","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Plot model summary 7 frequent words per topic. Print summary() topic model explore sets words characterize 10 topics.","code":"# stm plot() teh topic model provides a summary of topic proportions # print a summary() of the topic model"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"understanding-and-labeling-topics","dir":"Articles","previous_headings":"Exercise tasks","what":"Understanding and labeling topics","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Create word clouds 10 topics using 30 words highest probability per topic. Remove term “biodiversity” display.","code":"# word clouds are a useful first step to arrive at summary labels for topics"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"covariate-effects","dir":"Articles","previous_headings":"Exercise tasks","what":"Covariate effects","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Print regression tables selected topics.","code":"# print a summary() of effects"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"publication-year","dir":"Articles","previous_headings":"Exercise tasks > Covariate effects","what":"Publication year","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Use stm plot method create plot shows effect publication year topical prevalence Topic 4 Topic 8. Annotate probable terms. Alternatively, stminsights package used extract regression information stm effects object create customized charts.","code":"# stm plot offers various different plot options for covariate effects # stminsights allows to get effects in a format suitable for ggplot2"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"publication-status-effect","dir":"Articles","previous_headings":"Exercise tasks > Covariate effects","what":"Publication status effect","title":"Exercise 1: Topic modeling biodiversity preprints","text":"also incoporated publication status model (covariate is_published). Using stm plot method explore effect treatment “published” topical prevalence. Compare topical prevalence effect covariate is_published Topic 4.","code":"# stm plot offers various different plotoptions for covariate effects # stm plot offers various different plotoptions for covariate effects"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"combination-of-publication-status-and-publication-year","dir":"Articles","previous_headings":"Exercise tasks > Covariate effects","what":"Combination of publication status and publication year","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Finally, can also explore combined effect covariates; assumed interacting effect two covariates is_published year. Using stm plot function explore combined interacting covariate effect Topic 4. , stminsights can used retrieve information create customized visualizations combined covariate effect.","code":"# stminsights allows to get effects in a format suitable for ggplot2"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"topic-correlations","dir":"Articles","previous_headings":"Exercise tasks > Exploring the topic structure","what":"Topic correlations","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Finally, retrieve topic correlations matrix plot cooccurrence network.","code":"# topic correlations retrieved with stm"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"getting-the-document-data-1","dir":"Articles","previous_headings":"Solution","what":"Getting the document data","title":"Exercise 1: Topic modeling biodiversity preprints","text":"assume created local copy preprint data run analysis (see information code samples “Getting document data” vignette(\"covid-preprint-topics\")).","code":"load(url(\"PREPRINT_RDATA_LOCATION_HERE\"))"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"cleaning-filtering-and-annotating-the-data-1","dir":"Articles","previous_headings":"Solution","what":"Cleaning, filtering and annotating the data","title":"Exercise 1: Topic modeling biodiversity preprints","text":"example planning explore whether publication status influences topic prevalence. therefore adapt time range consider preprints added 2017 2021. reduce subset preprints reference term ‘biodiversity’ either preprint title abstract.","code":"library(dplyr) library(stringr)  preprints_cleaned <- preprints_raw %>%   group_by(doi) %>%   filter(version == max(version)) %>%   ungroup() %>%   distinct(doi, .keep_all = TRUE)  preprints <- preprints_cleaned %>%   mutate(published = stringr::str_trim(published)) %>%   mutate(published = na_if(published, \"NA\")) %>%   mutate(is_published = as.numeric(!is.na(published))) %>%   mutate(is_published = case_when(is_published == 1 ~ \"published\",                                   is_published == 0 ~ \"not published\",                                   TRUE ~ \"undefined\")) %>%   mutate(year = lubridate::year(date)) %>%   filter(year >= 2017 & year <= 2021) %>%    select(doi, server, title, abstract, date, year, version, is_published)  keywords <- c(\"biodiversity\")  search_pattern <- stringr::regex(paste(keywords, collapse = \"|\"),                                   ignore_case = TRUE)  biodiv_preprints <- preprints %>%   filter(stringr::str_detect(title, pattern = search_pattern) |            stringr::str_detect(abstract, pattern = search_pattern))"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"create-a-corpus-1","dir":"Articles","previous_headings":"Solution > Preparing and preprocessing the documents for text analysis","what":"Create a corpus","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Create corpus explore properties.","code":"library(quanteda)  pubs_corpus <- biodiv_preprints %>%   quanteda::corpus(docid_field = \"doi\", text_field = \"abstract\")  # pubs_corpus # Corpus consisting of 29,692 documents and 6 docvars."},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"tokenize-and-preprocess-1","dir":"Articles","previous_headings":"Solution > Preparing and preprocessing the documents for text analysis","what":"Tokenize and preprocess","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Tokenize applying steps Covid preprint example.","code":"pubs_tokens <- pubs_corpus %>%   quanteda::tokens(remove_punct = TRUE,                    remove_symbols = TRUE,                    remove_numbers = TRUE,                    remove_url = TRUE,                    remove_separators = TRUE,                    split_hyphens = TRUE)"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"create-a-document-feature-matrix-1","dir":"Articles","previous_headings":"Solution > Preparing and preprocessing the documents for text analysis","what":"Create a Document-feature matrix","title":"Exercise 1: Topic modeling biodiversity preprints","text":"","code":"pubs_dfm <- pubs_tokens %>%   quanteda::dfm()"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"filter-terms-and-documents-1","dir":"Articles","previous_headings":"Solution > Preparing and preprocessing the documents for text analysis","what":"Filter terms and documents","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Remove stopwords document-feature-matrix. Explore properties. Filter tokens documents applying approach Covid preprint example.","code":"pubs_dfm <- pubs_dfm %>%   quanteda::dfm_remove(pattern = quanteda::stopwords(\"english\")) #%>%   #quanteda::dfm_wordstem() pubs_dfm <- pubs_dfm %>%   quanteda::dfm_remove(min_nchar = 2) %>%   quanteda::dfm_trim(min_docfreq = 2, docfreq_type = \"count\") %>%   quanteda::dfm_subset(quanteda::ntoken(.) > 4)"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"fitting-the-stm-topic-model-1","dir":"Articles","previous_headings":"Solution > Topic modeling","what":"Fitting the STM topic model","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Fit stm topic model 10 topics prepared data. model consider interacting effect covariates is_published publication year topical prevalence. Apply seed argument value 9868467.","code":"library(stm)  biodiv_stm_docs <- quanteda::convert(pubs_dfm, to = \"stm\")  biodiv_model_K10 <- stm(documents = biodiv_stm_docs$documents,                     vocab = biodiv_stm_docs$vocab,                     data = biodiv_stm_docs$meta,                     prevalence = ~ is_published * year,                     K = 10,                     verbose = TRUE,                     seed = seed_stm)"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"estimating-the-effect-of-document-covariates-1","dir":"Articles","previous_headings":"Solution > Topic modeling","what":"Estimating the effect of document covariates","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Evaluate effect previously chosen topic prevalence covariates topics. concludes fitting model. following sections step sample exploration topic model.","code":"biodiv_effect_K10 <- estimateEffect(1:10 ~ is_published * year,                                    stmobj = biodiv_model_K10,                                    metadata = biodiv_stm_docs$meta)"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"basic-topic-model-information-1","dir":"Articles","previous_headings":"Solution > Analysing and interpreting the topic model","what":"Basic topic model information","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Plot model summary 7 frequent words per topic.  Print summary() topic model explore sets words characterize 10 topics.","code":"plot(biodiv_model_K10, n = 7) summary(biodiv_model_K10) ># A topic model with 10 topics, 1495 documents and a 8838 word dictionary. ># Topic 1 Top Words: >#       Highest Prob: species, fish, marine, invasive, biodiversity, native, river  >#       FREX: coral, reefs, lakes, fisheries, reef, fishing, ocean  >#       Lift: advection, afdw, aggregations, aleutian, ampat, amphipods, andaman  >#       Score: fish, reef, islands, coral, fisheries, fishing, sea  ># Topic 2 Top Words: >#       Highest Prob: data, species, biodiversity, can, information, using, research  >#       FREX: user, users, automated, learning, databases, images, algorithms  >#       Lift: cheilostome, cnns, crux, digitized, disparities, dnn, echolocating  >#       Score: images, users, user, algorithms, pipeline, learning, students  ># Topic 3 Top Words: >#       Highest Prob: host, disease, biodiversity, populations, microbiota, human, infection  >#       FREX: infection, pathogen, virus, viruses, viral, diseases, infections  >#       Lift: antimicrobial, antimicrobials, attack, auxiliary, baits, brain, brood  >#       Score: infection, disease, host, pathogen, gut, microbiota, virus  ># Topic 4 Top Words: >#       Highest Prob: genetic, species, genome, populations, gene, population, genes  >#       FREX: snp, alleles, introgression, genome, genomic, genetic, genomes  >#       Lift: 3a, admixed, angustifolia, antibacterial, aureus, beak, beast  >#       Score: genome, genetic, genes, genomes, genomic, gene, speciation  ># Topic 5 Top Words: >#       Highest Prob: species, model, biodiversity, can, ecological, models, dynamics  >#       FREX: coexistence, competitive, theory, simulations, competition, stability, empirical  >#       Lift: abandon, absences, accumulates, aggressively, anchovy, archosaurs, assumes  >#       Score: competitive, theory, coexistence, competition, stability, simulations, preemption  ># Topic 6 Top Words: >#       Highest Prob: species, diversity, biodiversity, change, richness, climate, across  >#       FREX: climatic, gradients, biotic, turnover, climate, scales, richness  >#       Lift: arabia, bioregions, bryophyte, constantly, divide, endotherms, equivalence  >#       Score: richness, climate, elevational, phylogenetic, zeta, ldg, gradients  ># Topic 7 Top Words: >#       Highest Prob: plant, soil, diversity, communities, microbial, community, species  >#       FREX: mixtures, fire, soil, aboveground, amf, nitrogen, plant  >#       Lift: biodiv, conditioned, decomposer, exudate, fertilisation, microclimate, microsite  >#       Score: soil, microbial, grazing, bacterial, amf, mixtures, crop  ># Topic 8 Top Words: >#       Highest Prob: forest, forests, species, tree, cover, de, biodiversity  >#       FREX: forest, forests, en, de, plantations, la, es  >#       Lift: como, diversidad, landcover, que, una, vegetable, acacia  >#       Score: forest, forests, la, que, de, las, plantations  ># Topic 9 Top Words: >#       Highest Prob: conservation, species, biodiversity, areas, land, use, management  >#       FREX: iucn, socio, protected, lands, pas, conservation, nations  >#       Lift: eu, herpetofauna, pas, 30x30, abroad, accessing, achievements  >#       Score: protected, land, pas, iucn, lands, natura, conservation  ># Topic 10 Top Words: >#       Highest Prob: dna, edna, samples, species, metabarcoding, biodiversity, diversity  >#       FREX: edna, metabarcoding, samples, dna, primer, coi, biomonitoring  >#       Lift: 1the, acuta, asv, battery, benthos, bony, bruv  >#       Score: edna, metabarcoding, dna, samples, primer, coi, cristatus"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"understanding-and-labeling-topics-1","dir":"Articles","previous_headings":"Solution","what":"Understanding and labeling topics","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Create word clouds 10 topics using 30 words highest probability per topic. Remove term “biodiversity” display. Word clouds showing 30 probable terms per topic.","code":"library(tidyr) library(tibble)  # get the top FREX words frex_top20 <- as.data.frame(labelTopics(biodiv_model_K10, n = 25)$frex) %>%   rownames_to_column(var = \"topic\") %>%   pivot_longer(starts_with(\"V\"), values_to = \"term\") %>%   mutate(is_frex = 1) %>%   select(-name)  topic_words <- tidytext::tidy(biodiv_model_K10, matrix = \"beta\") %>%   #filter(!(term %in% c(\"sars\", \"cov\", \"covid\"))) %>%    mutate(topic = as.character(topic)) %>%   group_by(topic) %>%   arrange(-beta) %>%   slice_head(n = 30) %>%   mutate(beta_norm = (beta - min(beta)) / (max(beta) - min(beta))) %>%   ungroup() %>%   left_join(frex_top20, by = c(\"topic\", \"term\")) %>%   mutate(is_frex = ifelse(is.na(is_frex), \"0\", \"1\")) %>%   filter(!(term %in% c(\"biodiversity\"))) %>%   mutate(topic = paste(\"Topic\", topic))  ggplot(topic_words, aes(label = term, size = beta_norm, color = is_frex)) +   ggwordcloud::geom_text_wordcloud_area(shape = \"square\",                                         family = \"Arial\",                                         rm_outside = TRUE) +   scale_radius(range = c(4, 15)) +   scale_color_manual(values = c(\"0\" = \"black\", \"1\" = \"#D55E00\")) +    facet_wrap(~topic, ncol = 5)"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"covariate-effects-1","dir":"Articles","previous_headings":"Solution","what":"Covariate effects","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Print regression tables selected topics.","code":"summary(biodiv_effect_K10) >#  ># Call: ># estimateEffect(formula = 1:10 ~ is_published * year, stmobj = biodiv_model_K10,  >#     metadata = biodiv_stm_docs$meta) >#  >#  ># Topic 1: >#  ># Coefficients: >#                              Estimate Std. Error t value Pr(>|t|) ># (Intercept)                -1.7332313 14.9438872  -0.116    0.908 ># is_publishedpublished      -6.9493223 19.3403719  -0.359    0.719 ># year                        0.0008999  0.0073994   0.122    0.903 ># is_publishedpublished:year  0.0034367  0.0095760   0.359    0.720 >#  >#  ># Topic 2: >#  ># Coefficients: >#                             Estimate Std. Error t value Pr(>|t|) ># (Intercept)                -5.868345  17.676685  -0.332    0.740 ># is_publishedpublished       4.697577  23.283355   0.202    0.840 ># year                        0.002959   0.008752   0.338    0.735 ># is_publishedpublished:year -0.002331   0.011528  -0.202    0.840 >#  >#  ># Topic 3: >#  ># Coefficients: >#                              Estimate Std. Error t value Pr(>|t|) ># (Intercept)                -2.2455010 18.1654965  -0.124    0.902 ># is_publishedpublished      -1.9547458 23.0416760  -0.085    0.932 ># year                        0.0011459  0.0089942   0.127    0.899 ># is_publishedpublished:year  0.0009744  0.0114087   0.085    0.932 >#  >#  ># Topic 4: >#  ># Coefficients: >#                             Estimate Std. Error t value Pr(>|t|) ># (Intercept)                10.312087  19.338567   0.533    0.594 ># is_publishedpublished      11.889584  23.778208   0.500    0.617 ># year                       -0.005063   0.009575  -0.529    0.597 ># is_publishedpublished:year -0.005871   0.011773  -0.499    0.618 >#  >#  ># Topic 5: >#  ># Coefficients: >#                              Estimate Std. Error t value Pr(>|t|) ># (Intercept)                 24.575697  18.445996   1.332    0.183 ># is_publishedpublished      -10.791778  23.317198  -0.463    0.644 ># year                        -0.012108   0.009133  -1.326    0.185 ># is_publishedpublished:year   0.005337   0.011545   0.462    0.644 >#  >#  ># Topic 6: >#  ># Coefficients: >#                              Estimate Std. Error t value Pr(>|t|) ># (Intercept)                14.0078485 17.4080714   0.805    0.421 ># is_publishedpublished       0.3472732 22.1226093   0.016    0.987 ># year                       -0.0068686  0.0086191  -0.797    0.426 ># is_publishedpublished:year -0.0001758  0.0109538  -0.016    0.987 >#  >#  ># Topic 7: >#  ># Coefficients: >#                              Estimate Std. Error t value Pr(>|t|) ># (Intercept)                -18.009805  18.406024  -0.978    0.328 ># is_publishedpublished       14.240984  22.836654   0.624    0.533 ># year                         0.008971   0.009114   0.984    0.325 ># is_publishedpublished:year  -0.007051   0.011308  -0.624    0.533 >#  >#  ># Topic 8: >#  ># Coefficients: >#                              Estimate Std. Error t value Pr(>|t|) ># (Intercept)                  6.656757  12.756755   0.522    0.602 ># is_publishedpublished      -12.276605  16.130419  -0.761    0.447 ># year                        -0.003264   0.006316  -0.517    0.605 ># is_publishedpublished:year   0.006074   0.007987   0.761    0.447 >#  >#  ># Topic 9: >#  ># Coefficients: >#                              Estimate Std. Error t value Pr(>|t|)   ># (Intercept)                -32.255879  19.548902  -1.650   0.0992 . ># is_publishedpublished        9.855472  25.583239   0.385   0.7001   ># year                         0.016044   0.009679   1.658   0.0976 . ># is_publishedpublished:year  -0.004891   0.012667  -0.386   0.6995   ># --- ># Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 >#  >#  ># Topic 10: >#  ># Coefficients: >#                             Estimate Std. Error t value Pr(>|t|) ># (Intercept)                 5.393026  18.152774   0.297    0.766 ># is_publishedpublished      -9.132794  21.836023  -0.418    0.676 ># year                       -0.002632   0.008988  -0.293    0.770 ># is_publishedpublished:year  0.004534   0.010812   0.419    0.675"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"publication-year-1","dir":"Articles","previous_headings":"Solution > Covariate effects","what":"Publication year","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Use stm plot method create plot shows effect publication year topical prevalence Topic 4 Topic 8. Annotate probable terms.  Alternatively, stminsights package used extract regression information stm effects object create customized charts.","code":"plot(biodiv_effect_K10,      covariate = \"year\",      method = \"continuous\",      model = biodiv_model_K10,      topics = c(4, 8),      xaxt = \"n\",      main = 'Effect of publication year on prevalence of Topic 4 (\"???\") and Topic 8 (\"???\")',      labeltype = \"prob\",      xlab = \"Publication year\") axis(1, at = c(\"2017\",\"2018\",\"2019\",\"2020\", \"2021\"), labels = c(2017, 2018, 2019, 2020, 2021)) library(stminsights)  year_effect <- get_effects(estimates = biodiv_effect_K10,                             variable = \"year\",                            type = \"continuous\")  year_effect %>%   mutate(topic = as.character(topic)) %>%   mutate(topic = paste(\"Topic\", topic)) %>%     ggplot(aes(x = value, y = proportion)) +       geom_line() +       geom_ribbon(aes(ymin = lower, ymax = upper),                    alpha = 0.2, linetype = 0)  +       xlab(\"Publication year\") +       ylab(\"Topic prevalence\") +       facet_wrap(~topic, ncol = 5) +       theme_minimal()"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"publication-status-effect-1","dir":"Articles","previous_headings":"Solution > Covariate effects","what":"Publication status effect","title":"Exercise 1: Topic modeling biodiversity preprints","text":"also incoporated publication status model (covariate is_published). Using stm plot method explore effect treatment “published” topical prevalence.  Compare topical prevalence effect covariate is_published Topic 4.","code":"plot(biodiv_effect_K10,       covariate = \"is_published\",      #topics = c(9, 10, 16, 1),      model = biodiv_model_K10,       method = \"difference\",      cov.value1 = \"published\", cov.value2 = \"not published\",      xlab = \"higher prevalence in unpublished ... higher prevalence in published\",      #xlim = c(-0.19, 0.1),      #labeltype = \"prob\",      main = \"Effect of preprint server (treatment 'published')\") plot(biodiv_effect_K10,       covariate = \"is_published\",      topics = c(4),      model = biodiv_model_K10,        method = \"pointestimate\",      xlab = \"Topical prevalence\",      #xlim = c(-0.04, 0.2),      #labeltype = \"prob\",      main = \"Effect of preprint 'is_published' covariate for Topic 4\")"},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"combination-of-publication-status-and-publication-year-1","dir":"Articles","previous_headings":"Solution > Covariate effects","what":"Combination of publication status and publication year","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Finally, can also explore combined effect covariates; assumed interacting effect two covariates is_published year. Using stm plot function explore combined interacting covariate effect Topic 4.  , stminsights can used retrieve information create customized visualizations combined covariate effect.","code":"published_effect <- get_effects(biodiv_effect_K10,                                  variable = \"year\", type = \"continuous\",                                  moderator = \"is_published\", modval = \"published\")  unpublished_effect <- get_effects(biodiv_effect_K10,                                   variable = \"year\", type = \"continuous\",                                    moderator = \"is_published\", modval = \"not published\")  is_published_effects <- bind_rows(published_effect, unpublished_effect)  is_published_effects %>%   mutate(topic = as.character(topic)) %>%   mutate(topic = paste(\"Topic\", topic)) %>%     ggplot(aes(x = value, y = proportion, color = moderator,                group = moderator, fill = moderator)) +       geom_line() +       geom_ribbon(aes(ymin = lower, ymax = upper,                        fill = moderator), alpha = 0.2, linetype = 0) +       xlab(\"Publication year\") +       ylab(\"Topic prevalence\") +       facet_wrap(~topic, ncol = 5) +       theme_minimal() +       theme(legend.position = \"bottom\")"},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/articles/exercise1-biodiv.html","id":"topic-correlations-1","dir":"Articles","previous_headings":"Solution > Exploring the topic structure","what":"Topic correlations","title":"Exercise 1: Topic modeling biodiversity preprints","text":"Finally, retrieve topic correlations matrix plot cooccurrence network.","code":"covid_topic_correlations <- topicCorr(biodiv_model_K10, cutoff = 0.001)  plot(covid_topic_correlations)"},{"path":"https://sdaume.github.io/srcquantcourse/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Stefan Daume. Author, maintainer.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Daume S (2024). srcquantcourse: Scripts Exercises SRC Quantitative Methods PhD Course. R package version 0.0.0.9000, https://github.com/sdaume/srcquantcourse, https://sdaume.github.io/srcquantcourse.","code":"@Manual{,   title = {srcquantcourse: Scripts and Exercises for the SRC Quantitative Methods PhD Course},   author = {Stefan Daume},   year = {2024},   note = {R package version 0.0.0.9000, https://github.com/sdaume/srcquantcourse},   url = {https://sdaume.github.io/srcquantcourse}, }"},{"path":"https://sdaume.github.io/srcquantcourse/index.html","id":"srcquantcourse","dir":"","previous_headings":"","what":"Scripts and Exercises for the SRC Quantitative Methods PhD Course","title":"Scripts and Exercises for the SRC Quantitative Methods PhD Course","text":"goal srcquantcourse provide sample analysis, replication scripts exercises data analysis module SRC Quantitative Methods PhD Course; part module concentrates probabilistic topic modelling.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Scripts and Exercises for the SRC Quantitative Methods PhD Course","text":"can install development version srcquantcourse GitHub : Alternatively, clone repo (https://github.com/sdaume/srcquantcourse) order work modify scripts.","code":"# install.packages(\"devtools\") devtools::install_github(\"sdaume/srcquantcourse\")"},{"path":"https://sdaume.github.io/srcquantcourse/index.html","id":"license-credits-and-acknowledgements","dir":"","previous_headings":"","what":"License, credits and acknowledgements","title":"Scripts and Exercises for the SRC Quantitative Methods PhD Course","text":"package shared MIT License. package relies several R packages listed package DESCRIPTION accompanying scripts. work packages’ authors hereby gratefully acknowledged. illustrate methods covered package preprint meta-data bioRxiv medRxiv used. preprint servers provide API access preprints explicitly intended support text mining; hereby gratefully acknowledged. actual preprints shared package, scripts utilizing medrxivr package provided obtain preprint data replicate results. package developed support education research Stockholm Resilience Centre; research benefited funding Swedish Research Council Sustainable Development (Formas).","code":""},{"path":"https://sdaume.github.io/srcquantcourse/index.html","id":"disclaimer","dir":"","previous_headings":"","what":"Disclaimer","title":"Scripts and Exercises for the SRC Quantitative Methods PhD Course","text":"package author(s) associated bioRxiv medRxiv. package developed reusable tool education author(s) research comes guarantee correctness results included package functions.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/biodiv_effect_K10.html","id":null,"dir":"Reference","previous_headings":"","what":"An STM regression object for a topic model with 10 topics — biodiv_effect_K10","title":"An STM regression object for a topic model with 10 topics — biodiv_effect_K10","text":"package data set provides results applying stm::estimateEffect() function included biodiv_model_K10 topic model object.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/biodiv_effect_K10.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"An STM regression object for a topic model with 10 topics — biodiv_effect_K10","text":"","code":"biodiv_effect_K10"},{"path":"https://sdaume.github.io/srcquantcourse/reference/biodiv_effect_K10.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"An STM regression object for a topic model with 10 topics — biodiv_effect_K10","text":"STM regression object","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/biodiv_model_K10.html","id":null,"dir":"Reference","previous_headings":"","what":"An STM topic model with 10 topics — biodiv_model_K10","title":"An STM topic model with 10 topics — biodiv_model_K10","text":"package data set provides sample STM topic model K = 10 topics (see stm::stm()). model fit bioRxiv medRxiv preprints 2017 2021 contain term 'biodiversity' title abstract. model fit respective publication status publication year topic prevalence covariates. included biodiv_effect_K10 dataset captures regression parameters document covariates.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/biodiv_model_K10.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"An STM topic model with 10 topics — biodiv_model_K10","text":"","code":"biodiv_model_K10"},{"path":"https://sdaume.github.io/srcquantcourse/reference/biodiv_model_K10.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"An STM topic model with 10 topics — biodiv_model_K10","text":"STM topic model object","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/covid_effect_K20.html","id":null,"dir":"Reference","previous_headings":"","what":"An STM regression object for a topic model with 20 topics — covid_effect_K20","title":"An STM regression object for a topic model with 20 topics — covid_effect_K20","text":"package data set provides results applying stm::estimateEffect() function included covid_model_K20 topic model object.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/covid_effect_K20.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"An STM regression object for a topic model with 20 topics — covid_effect_K20","text":"","code":"covid_effect_K20"},{"path":"https://sdaume.github.io/srcquantcourse/reference/covid_effect_K20.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"An STM regression object for a topic model with 20 topics — covid_effect_K20","text":"STM regression object","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/covid_model_K20.html","id":null,"dir":"Reference","previous_headings":"","what":"An STM topic model with 20 topics — covid_model_K20","title":"An STM topic model with 20 topics — covid_model_K20","text":"package data set provides sample STM topic model K = 20 topics (see stm::stm()). model fit bioRxiv medRxiv preprints 2020 2023 contain terms 'sars-cov' 'covid' title abstract. model fit respective preprint server publication year topic prevalence covariates. included covid_effect_K20 dataset captures regression parameters document covariates.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/covid_model_K20.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"An STM topic model with 20 topics — covid_model_K20","text":"","code":"covid_model_K20"},{"path":"https://sdaume.github.io/srcquantcourse/reference/covid_model_K20.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"An STM topic model with 20 topics — covid_model_K20","text":"STM topic model object","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/srcquantcourse-package.html","id":null,"dir":"Reference","previous_headings":"","what":"srcquantcourse: Scripts and Exercises for the SRC Quantitative Methods PhD Course — srcquantcourse-package","title":"srcquantcourse: Scripts and Exercises for the SRC Quantitative Methods PhD Course — srcquantcourse-package","text":"package collects scripts, data exercises notes 2024 SRC Quantitative Methods PhD course.","code":""},{"path":[]},{"path":"https://sdaume.github.io/srcquantcourse/reference/srcquantcourse-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"srcquantcourse: Scripts and Exercises for the SRC Quantitative Methods PhD Course — srcquantcourse-package","text":"Maintainer: Stefan Daume stefan.daume@su.se (ORCID)","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/topicmodel_evaluations.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluation results for topic models with different K — topicmodel_evaluations","title":"Evaluation results for topic models with different K — topicmodel_evaluations","text":"convenience dataset include results evaluating topic models different topic numbers (K) thematic subsets bioRxiv medRxiv preprints. Scripts run actual evaluations included package repo.","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/topicmodel_evaluations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluation results for topic models with different K — topicmodel_evaluations","text":"","code":"topicmodel_evaluations"},{"path":"https://sdaume.github.io/srcquantcourse/reference/topicmodel_evaluations.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Evaluation results for topic models with different K — topicmodel_evaluations","text":"dataframe four variables","code":""},{"path":"https://sdaume.github.io/srcquantcourse/reference/topicmodel_evaluations.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Evaluation results for topic models with different K — topicmodel_evaluations","text":"dataset specifies preprint subset, used K, type evaluation metric value metric.","code":""}]
